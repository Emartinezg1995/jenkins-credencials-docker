pipeline{
    agent any

    parameters{
        credentials credentialType: 'com.cloudbees.plugins.credentials.impl.UsernamePasswordCredentialsImpl', 
        defaultValue: '', 
        description: 'Docker Credentials', 
        name: 'DOCKER_PARAM',
        required: true
    }

    environment {
        DOCKER=credentials("${DOCKER_PARAM}")
        //DOCKER USU:PASS
        //DOCKER_USR USR
        //DOCKER_PSW PASS
    }

    stages {
        stage('Docker Build') {
            steps {
                sh 'docker build -t edsonmtz/jenkins-web:latest .'
            }
        }
        stage('Docker Push') {
            steps {               
                sh "docker login -u ${env.DOCKER_USR} -p ${env.DOCKER_PSW}"
                sh 'docker push edsonmtz/jenkins-web:latest'                
            }
        }
    }
}